!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){$(".number_input").on("keypress",function(e){if(8!=e.which&&0!=e.which&&46!=e.which&&(e.which<48||e.which>57))return!1}),$(".number_input").on("input",function(e){let t=$(this).val().replace(/ /g,"");t=t.replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1 "),$(this).val(t)})},function(e,t){document.getElementById("app__header"),document.querySelector(".app__main"),document.getElementById("app__h1");const n=document.getElementById("volumePage"),r=document.getElementById("volumePageLink"),a=document.getElementById("chartPage"),o=document.getElementById("chartPageLink"),l=document.getElementById("unitedChartLink"),d=document.getElementById("unitedChartPage");let s;function c(){document.querySelector(".rendered").classList.add("hide"),document.querySelector(".rendered").classList.remove("rendered")}function i(e){e.classList.remove("hide"),e.classList.add("rendered")}function u(e){sessionStorage.setItem("pageToShow",e)}window.addEventListener("load",()=>{sessionStorage.pageToShow?(s=sessionStorage.getItem("pageToShow"),i(document.getElementById(s))):(i(n),u("volumePage"),$("#volumePage").hide().fadeIn(500))}),r.addEventListener("click",()=>{c(),i(n),u("volumePage"),$("#volumePage").hide().fadeIn(500)}),o.addEventListener("click",()=>{c(),i(a),u("chartPage"),$("#chartPage").hide().fadeIn(500)}),l.addEventListener("click",()=>{c(),i(d),u("unitedChartPage"),$("#unitedChartPage").hide().fadeIn(500)})},function(e,t,n){"use strict";n.r(t);n(0),n(1);class r{constructor(){this.name="",this.estimate={ownCost:"",m2OwnCost:"",revenueExcludingFinRes:"",revenueIncludingFinRes:""},this.estate={totalSquare:"",flats:{flatsSquare:"",flatsMarkup:"",flatsPrice:""},offices:{officesSquare:"",officesMarkup:"",officesPrice:""},trade:{tradeSquare:"",tradeMarkup:"",tradePrice:""},storages:{storagesSquare:"",storagesMarkup:"",storagesPrice:""},parking:{parkingSquare:"",parkingMarkup:"",parkingPrice:""}},this.variantsOfFinancing=[],this.key="objectOfBuilding"+Math.random()}}!function(){const e=document.getElementById("objectsPageSelect");let t=[];const n=document.querySelector(".object__passport").getElementsByTagName("input"),a=document.getElementById("volumesOfCashCreateObjectButton"),o=document.getElementById("deleteObjectButton"),l=document.getElementById("volumesOfCashSaveButton"),d=[document.getElementById("objectName"),document.getElementById("objectEstimate"),document.getElementById("objectArea")],s=[document.getElementById("flatsSquare"),document.getElementById("officesSquare"),document.getElementById("tradeSquare"),document.getElementById("storagesSquare"),document.getElementById("parkingSquare")],c=[document.getElementById("flatsMarkup"),document.getElementById("officesMarkup"),document.getElementById("tradeMarkup"),document.getElementById("storagesMarkup"),document.getElementById("parkingMarkup")],i=[document.getElementById("flatsPrice"),document.getElementById("officesPrice"),document.getElementById("tradePrice"),document.getElementById("storagesPrice"),document.getElementById("parkingPrice")];let u=[],m=[],g=[];const f=document.getElementById("objectPassportNextStepButton"),p=document.querySelector(".object__passport__cost_price"),h=document.getElementById("m2OwnCostInput"),y=document.getElementById("countPriceButton"),v=document.getElementById("totalRevenue");let E,S,I,B,b,k=!1,L=!1;function _(){p.classList.remove("hide"),f.classList.add("hide")}function q(e,t,n){e[t][n]&&(document.getElementById(n).value=P(e[t][n]),document.getElementById(n).parentNode.classList.remove("hide"))}function P(e){return String(e).replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1 ")}function C(e){for(let t=0;t<e.length;t++)e[t].disabled=!0}function j(e){for(let t=0;t<e.length;t++)e[t].disabled=!1}window.addEventListener("load",()=>{(function(e,t){let n;if(e.length>0){(n=document.createElement("option")).value=null,n.textContent="Выберите объект строительства",t.appendChild(n),e.sort((e,t)=>e.name.toLowerCase-t.name.toLowerCase);for(let r=0;r<e.length;r++)(n=document.createElement("option")).value=r,n.textContent=e[r].name,t.appendChild(n)}else(n=document.createElement("option")).textContent="В базе данных отсутствуют сохранённые объекты.",t.appendChild(n)})(t=function(){let e=[];if(localStorage.length>0){let t=Object.keys(localStorage);for(let n=0;n<t.length;n++)t[n].indexOf("objectOfBuilding")>-1&&e.push(JSON.parse(localStorage.getItem(t[n])))}return e}(),e),C(n),0==t.length&&(a.classList.add("hide"),o.classList.add("hide"),j(n),B=new r)}),e.addEventListener("change",()=>{(b=function(e){return"number"==typeof+e.value&&(b=t[+e.value])}(e))&&(!function(e){C(n),document.getElementById("objectName").value=e.name,document.getElementById("objectEstimate").value=P(e.estimate.ownCost),document.getElementById("objectArea").value=P(e.estate.totalSquare),q(e.estate,"flats","flatsSquare"),q(e.estate,"offices","officesSquare"),q(e.estate,"trade","tradeSquare"),q(e.estate,"storages","storagesSquare"),q(e.estate,"parking","parkingSquare"),h.value=P(e.estimate.m2OwnCost),q(e.estate,"flats","flatsMarkup"),q(e.estate,"offices","officesMarkup"),q(e.estate,"trade","tradeMarkup"),q(e.estate,"storages","storagesMarkup"),q(e.estate,"parking","parkingMarkup"),q(e.estate,"flats","flatsPrice"),q(e.estate,"offices","officesPrice"),q(e.estate,"trade","tradePrice"),q(e.estate,"storages","storagesPrice"),q(e.estate,"parking","parkingPrice"),v.value=P(e.estimate.revenueExcludingFinRes)}(b),_(),y.classList.add("hide"),l.classList.add("hide"),o.classList.remove("hide"))}),a.addEventListener("click",()=>{B=new r,p.classList.add("hide"),f.classList.remove("hide"),j(n),function(e){for(let t=0;t<e.length;t++)e[t].value=""}(n),y.classList.remove("hide"),l.classList.remove("hide"),o.classList.add("hide")}),f.addEventListener("click",e=>{e.preventDefault(),k=function(e){const t='<small class="small_error">Введите корректные данные</small>';for(let n=0;n<e.length;n++){if(!e[n].value)return e[n].parentNode.lastElementChild==document.querySelector(".small_error")&&e[n].parentNode.removeChild(document.querySelector(".small_error")),e[n].insertAdjacentHTML("afterend",'<small class="small_error">Данное поле обязательно к заполнению</small>'),!1;if(e[n].parentNode.lastElementChild==document.querySelector(".small_error")&&e[n].parentNode.removeChild(document.querySelector(".small_error")),e[n]==document.getElementById("objectEstimate")){if(+e[n].value<1e4)return e[n].insertAdjacentHTML("afterend",t),!1;e[n].parentNode.lastElementChild==document.querySelector(".small_error")&&e[n].parentNode.removeChild(document.querySelector(".small_error")),S=+e[n].value.replace(/ /g,"")}if(e[n]==document.getElementById("objectArea")){if(+e[n].value<100)return e[n].insertAdjacentHTML("afterend",t),!1;E=+e[n].value.replace(/ /g,""),e[n].parentNode.lastElementChild==document.querySelector(".small_error")&&e[n].parentNode.removeChild(document.querySelector(".small_error"))}}return B.name=document.getElementById("objectName").value,B.estimate.ownCost=S,B.estate.totalSquare=E,!0}(d),L=function(e){const t=document.getElementById("passportUlLabel");let n,r=0,a=0;for(let t=0;t<e.length;t++)+e[t].value.replace(/ /g,"")>0?(r++,n=e[t].getAttribute("id"),a+=+e[t].value.replace(/ /g,""),c[t].parentNode.classList.remove("hide"),i[t].parentNode.classList.remove("hide"),m.push(c[t]),g.push(i[t]),u.push(+e[t].value.replace(/ /g,"")),B.estate[n.slice(0,n.length-6)][n]=+e[t].value.replace(/ /g,"")):(c[t].parentNode.classList.add("hide"),i[t].parentNode.classList.add("hide"));return 0==r?(t.nextElementSibling==document.querySelector(".small_error")&&t.parentNode.removeChild(document.querySelector(".small_error")),t.insertAdjacentHTML("afterend",'<small class="small_error">Заполните, как минимум, 1 тип недвижимости</small>'),!1):(t.nextElementSibling==document.querySelector(".small_error")&&t.parentNode.removeChild(document.querySelector(".small_error")),a!=E?(t.nextElementSibling==document.querySelector(".small_error")&&t.parentNode.removeChild(document.querySelector(".small_error")),t.insertAdjacentHTML("afterend",'<small class="small_error">Сумма введённых кв.метров не соответсвует общему числу кв.м. к реализации.</small>'),u.length=0,!1):(t.nextElementSibling==document.querySelector(".small_error")&&t.parentNode.removeChild(document.querySelector(".small_error")),!0))}(s),k&&L&&(_(),I=function(e,t,n,r){return n=(t/e).toFixed(0),r.value=String(n).replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1 "),n}(E,S,I,h),B.estimate.m2OwnCost=I),I=+I}),y.addEventListener("click",e=>{e.preventDefault(),function(){let e,t,n,r=0;for(let a=0;a<m.length;a++)e=+m[a].value,n=m[a].getAttribute("id"),B.estate[n.slice(0,n.length-6)][n]=+m[a].value,t=(I/100*e+I).toFixed(0),B.estate[n.slice(0,n.length-6)][g[a].getAttribute("id")]=t,g[a].value=String(t).replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1 "),r+=t*u[a];B.estimate.revenueExcludingFinRes=r,v.value=String(r).replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1 ")}()}),l.addEventListener("click",()=>{console.log(B),localStorage.setItem(B.key,JSON.stringify(B))}),o.addEventListener("click",()=>{localStorage.removeItem(b.key),window.location.reload()})}(),console.log("Start")}]);